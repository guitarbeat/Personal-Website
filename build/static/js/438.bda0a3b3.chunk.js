"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[438],{9438:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var r=a(885),n=a(2791),i=a(2426),s=a.n(i),o=a(4957),c=a(184);var l=function(e){var t=e.first_year,a=e.event_bars,r=e.bar_height,n=e.bar_start,i=a.map((function(e){return(0,c.jsx)("div",{className:"events__timeline__subbar",style:{height:(e[0]||0)+"%",top:(e[1]||0)+"%"}})}));return(0,c.jsxs)("div",{className:"events__timeline",children:[(0,c.jsx)("p",{className:"events__timeline__start",children:t}),i,(0,c.jsx)("div",{className:"events__timeline__bar",style:{height:(r||0)+"%",top:(n||0)+"%"}}),(0,c.jsx)("p",{className:"events__timeline__now",children:"Now"})]})};var d=function(e){var t=e.event,a=e.activeCard,i=e.changeBarHeight,o=e.handleCardClick,l=a===t.slug,d=(0,n.useRef)(null),m=(0,n.useState)(""),f=(0,r.Z)(m,2),u=f[0],h=f[1],v=function(){var e=s()(),a=t._from.diff(e);h(a>0?"Event starts in ".concat(s().duration(a).humanize()):"Event has started!")};(0,n.useEffect)((function(){v();var e=setInterval(v,6e4);return function(){return clearInterval(e)}}),[t]);var _=function(){d.current&&i(d.current)};return(0,c.jsxs)("div",{ref:d,className:"work__item ".concat(l?"active":""),"data-key":t.slug,onMouseEnter:_,onTouchStart:_,onClick:function(){return o(t.slug)},"data-barstart":t.bar_start,"data-barheight":t.bar_height,children:[(0,c.jsx)("img",{src:t.image?t.image:"/frog.png",alt:t.title,style:{width:"100%"}}),(0,c.jsxs)("p",{className:"work__item__place",children:[(0,c.jsx)("i",{className:"fa fa-map-marker-alt","aria-hidden":"true"})," ",t.place]}),(0,c.jsx)("h2",{children:t.title}),(0,c.jsxs)("p",{className:"work__item__date",children:[t.date,", ",t.time]}),(0,c.jsx)("p",{children:t.description}),(0,c.jsx)("p",{children:u})," "]},t.slug)};var m=(0,o.R0)("events")((function(e){var t=e.db,a=(0,n.useState)(0),i=(0,r.Z)(a,2),o=i[0],m=i[1],f=(0,n.useState)(0),u=(0,r.Z)(f,2),h=u[0],v=u[1],_=(0,n.useState)(),g=(0,r.Z)(_,2),p=g[0],b=g[1],j=(0,n.useState)([]),x=(0,r.Z)(j,2),k=x[0],H=x[1];(0,n.useEffect)((function(){if(t&&t.events){var e=t.events.map((function(e){return{title:e.title,place:e.place,date:e.date,from:e.from,to:e.to,description:e.description,image:e.image,slug:"".concat(e.title.replace(/\s+/g,"-").toLowerCase(),"-").concat(e.from.replace(/:/g,""))}}));e.sort((function(e,t){return s()(e.from,"HH:mm")-s()(t.from,"HH:mm")})),H(e)}}),[t]);var N=s()(),C=N.format("dddd"),w=N.format("h:mm a"),y="Today is ".concat(C,", ").concat(w,", and here's what you have planned:"),E=(k.find((function(e){return s()(e.from,"HH:mm").isAfter(N)})),s()());k.forEach((function(e){if(e){var t=e.to?s()(e.to,"HH:mm"):s()(),a=s()(e.from,"HH:mm"),r=t.diff(a,"minutes");e.from=a.format("HH:mm"),e.to=e.to?t.format("HH:mm"):"Now",e._from=a,e._to=t,e.time=0===r?e.from:e.from+" - "+e.to,e.duration=0===r?1:r,a.diff(E)<0&&(E=a)}}));var S=s()().diff(E,"minutes");k.forEach((function(e){e.bar_start=100*e._from.diff(E,"minutes")/S,e.bar_height=100*e.duration/S}));var Y=k.map((function(e){return[null===e||void 0===e?void 0:e.bar_height,null===e||void 0===e?void 0:e.bar_start]}));function Z(e){var t=e.getAttribute("data-barstart"),a=e.getAttribute("data-barheight");null!==t&&null!==a&&(v(t),m(a))}var A=function(e){b(p===e?null:e)};return(0,c.jsx)("div",{className:"container",id:"events",children:(0,c.jsxs)("div",{className:"container__content",children:[(0,c.jsx)("a",{className:"google-sheet-link",href:"https://docs.google.com/spreadsheets/d/1kYcFtsMQOap_52pKlTfWCYJk1O5DD66LlZ90TWCgAyA/edit#gid=1802221480",target:"_blank",rel:"noopener noreferrer",children:"View Google Sheet"}),(0,c.jsx)("h1",{children:"Mario Comes to Portland!"}),(0,c.jsx)("h2",{children:y}),(0,c.jsxs)("div",{className:"events",children:[(0,c.jsx)(l,{first_year:E.format("YYYY"),event_bars:Y,bar_height:o,bar_start:h}),(0,c.jsx)("div",{className:"events__items",children:k.map((function(e){if(e)return(0,c.jsx)(d,{event:e,activeCard:p,changeBarHeight:Z,handleCardClick:A})}))})]})]})})}))}}]);
//# sourceMappingURL=438.bda0a3b3.chunk.js.map