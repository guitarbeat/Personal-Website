(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[167],{3167:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>a});var i=s(5043),h=(s(9758),s(579));"undefined"===typeof window.g&&(window.g={m:Math,states:{},state:"play",config:{title:"Snakely",debug:!1,state:"play"},addState(t){this.states[t.name]=t},setState(t){this.state&&this.states[this.state]&&this.states[this.state].exit(),this.state=t,this.states[this.state]&&this.states[this.state].init()}});const a=()=>{const t=(0,i.useRef)(null);return(0,i.useEffect)((()=>{const e=setTimeout((()=>{if(t.current)try{window.initSnakeGame()}catch(e){console.error("Failed to initialize snake game:",e)}}),100);return()=>{if(clearTimeout(e),window.g&&window.g.states&&window.g.state&&window.g.states[window.g.state])try{window.g.states[window.g.state].exit()}catch(t){console.error("Error cleaning up snake game:",t)}}}),[]),(0,h.jsxs)("div",{className:"snake-game",ref:t,children:[(0,h.jsx)("div",{className:"score",children:"0"}),(0,h.jsx)("div",{className:"stage"})]})}},9758:()=>{const t=window.g={m:Math,mathProps:"E LN10 LN2 LOG2E LOG10E PI SQRT1_2 SQRT2 abs acos asin atan ceil cos exp floor log round sin sqrt tan atan2 pow max min".split(" "),states:{},state:"play",config:{title:"Snakely",debug:"#debug"===window.location.hash,state:"play"},rand:()=>Math.random(),floor:t=>Math.floor(t),sin:t=>Math.sin(t),max:(t,e)=>Math.max(t,e),min:(t,e)=>Math.min(t,e)};for(let u=0;u<t.mathProps.length;u++)t[t.mathProps[u]]=t.m[t.mathProps[u]];t.m.TWO_PI=2*t.m.PI;class e{}e.TITLE=t.config.title,e.DEBUG=t.config.debug,e.INITIAL_STATE=t.config.state,e.DIMENSIONS={LONG:28,SHORT:16,PADDING:.25};class s{static rand(e,s){return t.rand()*(s-e)+e}static randInt(e,s){return t.floor(t.rand()*(s-e+1))+e}}class i{constructor(){this.reset()}reset(){this.now=t.floor(t.m.now()),this.last=t.floor(t.m.now()),this.delta=60,this.ndelta=1,this.elapsed=0,this.nelapsed=0,this.tick=0}update(){this.now=t.floor(t.m.now()),this.delta=this.now-this.last,this.ndelta=t.min(t.max(this.delta/(1e3/60),1e-4),10),this.elapsed+=this.delta,this.nelapsed+=this.ndelta,this.last=this.now,this.tick++}}class h{constructor(t,e){this.cols=t,this.rows=e,this.tiles=Array(t).fill().map((()=>Array(e).fill("empty")))}get(t,e){return this.tiles[t][e]}set(t,e,s){this.tiles[t][e]=s}}class a{constructor(t){this.parentState=t.parentState,this.col=t.col,this.row=t.row,this.x=t.x,this.y=t.y,this.w=t.w,this.h=t.h,this.elem=document.createElement("div"),this.elem.style.position="absolute",this.parentState.stageElem.appendChild(this.elem)}updateDimensions(){this.x=this.col*this.parentState.tileWidth,this.y=this.row*this.parentState.tileHeight,this.w=this.parentState.tileWidth-this.parentState.spacing,this.h=this.parentState.tileHeight-this.parentState.spacing}render(){this.elem.style.left=`${this.x}px`,this.elem.style.top=`${this.y}px`,this.elem.style.width=`${this.w}px`,this.elem.style.height=`${this.h}px`}}class r extends a{constructor(t){super(t),this.elem.className="tile",this.classes={pressed:0,path:0,up:0,down:0,left:0,right:0}}update(){Object.keys(this.classes).forEach((t=>{this.classes[t]&&this.classes[t]--}));const t=this.parentState.food.tile;t.col===this.col||t.row===this.row?this.updatePathHighlight(t):this.classes.path=0,this.parentState.food.eaten&&(this.classes.path=0)}updatePathHighlight(t){this.classes.path=1,this.classes.right=this.col<t.col?1:0,this.classes.left=this.col>t.col?1:0,this.classes.up=this.row>t.row?1:0,this.classes.down=this.row<t.row?1:0}render(){const t=Object.entries(this.classes).filter((t=>{let[e,s]=t;return s})).map((t=>{let[e]=t;return e})).join(" ");this.elem.className=`tile ${t}`}}class n extends a{constructor(t){super(t),this.color=null,this.scale=1,this.rotation=0,this.blur=0,this.alpha=1,this.borderRadius=0,this.borderRadiusAmount=0}update(e){this.x=this.col*this.parentState.tileWidth,this.y=this.row*this.parentState.tileHeight,0===e?(this.color="#fff",this.blur=.03*this.parentState.dimAvg+t.sin(this.parentState.time.elapsed/200)*this.parentState.dimAvg*.015,"n"===this.parentState.snake.dir?this.borderRadius=`${this.borderRadiusAmount}% ${this.borderRadiusAmount}% 0 0`:"s"===this.parentState.snake.dir?this.borderRadius=`0 0 ${this.borderRadiusAmount}% ${this.borderRadiusAmount}%`:"e"===this.parentState.snake.dir?this.borderRadius=`0 ${this.borderRadiusAmount}% ${this.borderRadiusAmount}% 0`:"w"===this.parentState.snake.dir&&(this.borderRadius=`${this.borderRadiusAmount}% 0 0 ${this.borderRadiusAmount}%`)):(this.color="#fff",this.blur=0,this.borderRadius="0"),this.alpha=1-e/this.parentState.snake.tiles.length*.6,this.rotation=this.parentState.snake.justAteTick/this.parentState.snake.justAteTickMax*90,this.scale=1+this.parentState.snake.justAteTick/this.parentState.snake.justAteTickMax*1}render(t){this.elem.style.left=`${this.x}px`,this.elem.style.top=`${this.y}px`,this.elem.style.width=`${this.w}px`,this.elem.style.height=`${this.h}px`,this.elem.style.backgroundColor=`rgba(255, 255, 255, ${this.alpha})`,this.elem.style.boxShadow=`0 0 ${this.blur}px #fff`,this.elem.style.borderRadius=this.borderRadius}}class o extends a{constructor(t){super(t),this.blur=0,this.scale=1,this.hue=100,this.opacity=0}update(){this.x=this.col*this.parentState.tileWidth,this.y=this.row*this.parentState.tileHeight,this.blur=.03*this.parentState.dimAvg+t.sin(this.parentState.time.elapsed/200)*this.parentState.dimAvg*.015,this.scale=.8+.2*t.sin(this.parentState.time.elapsed/200),this.parentState.food.birthTick||this.parentState.food.deathTick?this.parentState.food.birthTick?this.opacity=1-this.parentState.food.birthTick/1*1:this.opacity=this.parentState.food.deathTick/1*1:this.opacity=1}render(){this.elem.style.left=`${this.x}px`,this.elem.style.top=`${this.y}px`,this.elem.style.width=`${this.w}px`,this.elem.style.height=`${this.h}px`,this.elem.style.transform=`translateZ(0) scale(${this.scale})`,this.elem.style.backgroundColor=`hsla(${this.hue}, 100%, 60%, 1)`,this.elem.style.boxShadow=`0 0 ${this.blur}px hsla(${this.hue}, 100%, 60%, 1)`,this.elem.style.opacity=this.opacity}}class l{constructor(t){this.parentState=t.parentState,this.dir="e",this.currDir=this.dir,this.tiles=[];for(let s=0;s<5;s++)this.tiles.push(new n({parentState:this.parentState,col:8-s,row:3,x:(8-s)*this.parentState.tileWidth,y:3*this.parentState.tileHeight,w:this.parentState.tileWidth-this.parentState.spacing,h:this.parentState.tileHeight-this.parentState.spacing}));this.last=0,this.updateTick=10,this.updateTickMax=this.updateTick,this.updateTickLimit=3,this.updateTickChange=.2,this.deathFlag=0,this.justAteTick=0,this.justAteTickMax=1,this.justAteTickChange=.05;let e=this.tiles.length;for(;e--;)this.parentState.grid.set(this.tiles[e].col,this.tiles[e].row,"snake")}updateDimensions(){let t=this.tiles.length;for(;t--;)this.tiles[t].updateDimensions()}update(){if(this.parentState.keys.up?"s"!==this.dir&&"n"!==this.dir&&"s"!==this.currDir&&"n"!==this.currDir&&(this.dir="n"):this.parentState.keys.down?"n"!==this.dir&&"s"!==this.dir&&"n"!==this.currDir&&"s"!==this.currDir&&(this.dir="s"):this.parentState.keys.right?"w"!==this.dir&&"e"!==this.dir&&"w"!==this.currDir&&"e"!==this.currDir&&(this.dir="e"):this.parentState.keys.left&&"e"!==this.dir&&"w"!==this.dir&&"e"!==this.currDir&&"w"!==this.currDir&&(this.dir="w"),this.parentState.keys.up=0,this.parentState.keys.down=0,this.parentState.keys.right=0,this.parentState.keys.left=0,this.updateTick+=this.parentState.time.ndelta,this.updateTick>=this.updateTickMax){this.updateTick=this.updateTick-this.updateTickMax,this.tiles.unshift(new n({parentState:this.parentState,col:this.tiles[0].col,row:this.tiles[0].row,x:this.tiles[0].col*this.parentState.tileWidth,y:this.tiles[0].row*this.parentState.tileHeight,w:this.parentState.tileWidth-this.parentState.spacing,h:this.parentState.tileHeight-this.parentState.spacing})),this.last=this.tiles.pop(),this.parentState.stageElem.removeChild(this.last.elem),this.parentState.boardTiles.collection[this.last.col+this.last.row*this.parentState.cols].classes.pressed=2;let t=this.tiles.length;for(;t--;)this.parentState.grid.set(this.tiles[t].col,this.tiles[t].row,"snake");if(this.parentState.grid.set(this.last.col,this.last.row,"empty"),"n"===this.dir?(this.currDir="n",this.tiles[0].row-=1):"s"===this.dir?(this.currDir="s",this.tiles[0].row+=1):"w"===this.dir?(this.currDir="w",this.tiles[0].col-=1):"e"===this.dir&&(this.currDir="e",this.tiles[0].col+=1),this.wallFlag=!1,this.tiles[0].col>=this.parentState.cols&&(this.tiles[0].col=0,this.wallFlag=!0),this.tiles[0].col<0&&(this.tiles[0].col=this.parentState.cols-1,this.wallFlag=!0),this.tiles[0].row>=this.parentState.rows&&(this.tiles[0].row=0,this.wallFlag=!0),this.tiles[0].row<0&&(this.tiles[0].row=this.parentState.rows-1,this.wallFlag=!0),"snake"===this.parentState.grid.get(this.tiles[0].col,this.tiles[0].row)&&(this.deathFlag=1,clearTimeout(this.foodCreateTimeout)),"food"===this.parentState.grid.get(this.tiles[0].col,this.tiles[0].row)){this.tiles.push(new n({parentState:this.parentState,col:this.last.col,row:this.last.row,x:this.last.col*this.parentState.tileWidth,y:this.last.row*this.parentState.tileHeight,w:this.parentState.tileWidth-this.parentState.spacing,h:this.parentState.tileHeight-this.parentState.spacing})),this.updateTickMax-this.updateTickChange>this.updateTickLimit&&(this.updateTickMax-=this.updateTickChange),this.parentState.score++,this.parentState.scoreElem.innerHTML=this.parentState.score,this.justAteTick=this.justAteTickMax,this.parentState.food.eaten=1,this.parentState.stageElem.removeChild(this.parentState.food.tile.elem);const t=this;this.foodCreateTimeout=setTimeout((function(){t.parentState.food=new d({parentState:t.parentState})}),300)}this.deathFlag&&this.parentState.setState("play")}let t=this.tiles.length;for(;t--;)this.tiles[t].update(t);this.justAteTick>0?this.justAteTick-=this.justAteTickChange:this.justAteTick<0&&(this.justAteTick=0)}render(){let t=this.tiles.length;for(;t--;)this.tiles[t].render(t)}}class d{constructor(t){this.parentState=t.parentState,this.tile=new o({parentState:this.parentState,col:0,row:0,x:0,y:0,w:this.parentState.tileWidth-this.parentState.spacing,h:this.parentState.tileHeight-this.parentState.spacing}),this.reset(),this.eaten=0,this.birthTick=1,this.deathTick=0,this.birthTickChange=.025,this.deathTickChange=.05}reset(){const t=[];for(let s=0;s<this.parentState.cols;s++)for(let e=0;e<this.parentState.rows;e++){"empty"===this.parentState.grid.get(s,e)&&t.push({x:s,y:e})}const e=t[s.randInt(0,t.length-1)];this.tile.col=e.x,this.tile.row=e.y}updateDimensions(){this.tile.updateDimensions()}update(){this.tile.update(),this.birthTick>0?this.birthTick-=this.birthTickChange:this.birthTick<0&&(this.birthTick=0),this.parentState.grid.set(this.tile.col,this.tile.row,"food")}render(){this.tile.render()}}class c{constructor(){this.collection=[],this.length=0}add(t){t?(this.collection.push(t),this.length++):console.warn("Attempted to add null/undefined item to Group")}remove(t){t<0||t>=this.length?console.warn("Invalid index for Group.remove:",t):(this.collection.splice(t,1),this.length--)}empty(){this.collection=[],this.length=0}each(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.collection||0===this.length)return;if("string"!==typeof t&&"function"!==typeof t)return void console.error("Action must be either a method name (string) or a function");const s=(e,s)=>{try{"string"===typeof t?"function"===typeof e[t]?e[t](s):console.warn(`Method ${t} not found on item at index ${s}`):t(e,s)}catch(i){console.error(`Error executing action on item at index ${s}:`,i)}};if(e)for(let i=0;i<this.length;i++)s(this.collection[i],i);else for(let i=this.length-1;i>=0;i--)s(this.collection[i],i)}}function p(){requestAnimationFrame(p),t.state&&t.states[t.state]&&t.states[t.state].step()}t.addState=function(e){t.states[e.name]=e},t.setState=function(e){t.state&&t.states[t.state]&&t.states[t.state].exit(),t.state=e,t.states[t.state].init()},t.currentState=function(){return t.states[t.state]},t.addState(new class{constructor(){this.name="play",this.isGameOver=!1,this.isPaused=!1,this.boundKeydown=null,this.boundResize=null}init(){try{if(this.scoreElem=document.querySelector(".score"),this.stageElem=document.querySelector(".stage"),!this.scoreElem||!this.stageElem)return void console.error("Required DOM elements not found");this.dimLong=e.DIMENSIONS.LONG,this.dimShort=e.DIMENSIONS.SHORT,this.padding=e.DIMENSIONS.PADDING,this.boardTiles=new c,this.keys={},this.foodCreateTimeout=null,this.score=0,this.scoreElem.innerHTML=this.score,this.time=new i,this.getDimensions(),this.winWidth<this.winHeight?(this.rows=this.dimLong,this.cols=this.dimShort):(this.rows=this.dimShort,this.cols=this.dimLong),this.spacing=1,this.grid=new h(this.cols,this.rows),this.resize(),this.createBoardTiles(),this.bindEvents(),this.snake=new l({parentState:this}),this.food=new d({parentState:this}),this.isGameOver=!1,this.isPaused=!1}catch(t){console.error("Error initializing game:",t)}}bindEvents(){this.boundKeydown=this.keydown.bind(this),this.boundResize=this.resize.bind(this),window.addEventListener("keydown",this.boundKeydown,!1),window.addEventListener("resize",this.boundResize,!1)}keydown(t){if(this.isGameOver||this.isPaused)return void(32!==t.keyCode&&32!==t.which||this.resetGame());t.preventDefault();switch(t.keyCode||t.which){case 38:case 87:this.upOn();break;case 39:case 68:this.rightOn();break;case 40:case 83:this.downOn();break;case 37:case 65:this.leftOn();break;case 80:this.togglePause()}}togglePause(){this.isPaused=!this.isPaused}resetGame(){this.isGameOver=!1,this.isPaused=!1,this.score=0,this.scoreElem.innerHTML=this.score,this.snake&&(this.snake=new l({parentState:this})),this.food&&(this.food=new d({parentState:this}))}gameOver(){this.isGameOver=!0,console.log("Game Over! Press Space to restart")}step(){if(!this.isGameOver&&!this.isPaused&&this.boardTiles&&this.snake&&this.food&&this.time)try{this.boardTiles.each("update"),this.boardTiles.each("render"),this.snake.update(),this.snake.render(),this.food.update(),this.food.render(),this.time.update()}catch(t){console.error("Error in game step:",t)}}exit(){this.boundKeydown&&window.removeEventListener("keydown",this.boundKeydown,!1),this.boundResize&&window.removeEventListener("resize",this.boundResize,!1),this.stageElem&&(this.stageElem.innerHTML=""),this.grid&&(this.grid.tiles=null),this.time=null,this.snake=null,this.food=null,this.boardTiles=null}getDimensions(){this.winWidth=window.innerWidth,this.winHeight=window.innerHeight,this.activeWidth=this.winWidth-this.winWidth*this.padding,this.activeHeight=this.winHeight-this.winHeight*this.padding}resize(){const t=this;t.getDimensions(),t.stageRatio=t.rows/t.cols,t.activeWidth>t.activeHeight/t.stageRatio?(t.stageHeight=t.activeHeight,t.stageElem.style.height=`${t.stageHeight}px`,t.stageWidth=Math.floor(t.stageHeight/t.stageRatio),t.stageElem.style.width=`${t.stageWidth}px`):(t.stageWidth=t.activeWidth,t.stageElem.style.width=`${t.stageWidth}px`,t.stageHeight=Math.floor(t.stageWidth*t.stageRatio),t.stageElem.style.height=`${t.stageHeight}px`),t.tileWidth=~~(t.stageWidth/t.cols),t.tileHeight=~~(t.stageHeight/t.rows),t.dimAvg=(t.activeWidth+t.activeHeight)/2,t.spacing=Math.max(1,~~(.0025*t.dimAvg)),t.stageElem.style.marginTop=`-${t.stageElem.offsetHeight/2}px`,t.boardTiles.each("updateDimensions"),void 0!==t.snake&&t.snake.updateDimensions(),void 0!==t.food&&t.food.updateDimensions()}createBoardTiles(){for(let t=0;t<this.rows;t++)for(let e=0;e<this.cols;e++)this.boardTiles.add(new r({parentState:this,col:e,row:t,x:e*this.tileWidth,y:t*this.tileHeight,w:this.tileWidth-this.spacing,h:this.tileHeight-this.spacing}))}upOn(){this.keys.up=1}downOn(){this.keys.down=1}rightOn(){this.keys.right=1}leftOn(){this.keys.left=1}upOff(){this.keys.up=0}downOff(){this.keys.down=0}rightOff(){this.keys.right=0}leftOff(){this.keys.left=0}}),window.initSnakeGame=function(){p()}}}]);
//# sourceMappingURL=167.e7680763.chunk.js.map