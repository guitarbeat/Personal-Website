"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[438],{9438:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var r=a(885),n=a(2791),s=a(2426),i=a.n(s),o=a(4957),c=a(184);var l=function(e){var t=e.first_year,a=e.event_bars,r=e.bar_height,n=e.bar_start,s=a.map((function(e,t){return(0,c.jsx)("div",{className:"events__timeline__subbar",style:{height:(e[0]||0)+"%",top:(e[1]||0)+"%"}},t)}));return(0,c.jsxs)("div",{className:"events__timeline",children:[(0,c.jsx)("p",{className:"events__timeline__start",children:t}),s,(0,c.jsx)("div",{className:"events__timeline__bar",style:{height:(r||0)+"%",top:(n||0)+"%"}}),(0,c.jsx)("p",{className:"events__timeline__now",children:"Now"})]})},u=function(e){var t=e.event,a=e.activeCard,s=e.changeBarHeight,o=e.handleCardClick,l=a===t.slug,u=(0,n.useRef)(null),d=(0,n.useState)(""),m=(0,r.Z)(d,2),f=m[0],h=m[1],v=(0,n.useCallback)((function(){var e=i()(),a=t._from.diff(e);h(a>0?"Event starts in ".concat(i().duration(a).humanize()):"Event has started!")}),[t]);(0,n.useEffect)((function(){v();var e=setInterval(v,6e4);return function(){return clearInterval(e)}}),[t,v]);var _=(0,n.useCallback)((function(){u.current&&s(u.current)}),[s]);return(0,c.jsxs)("div",{ref:u,className:"events__item ".concat(l?"active":""),"data-key":t.slug,onMouseEnter:_,onTouchStart:_,onClick:function(){return o(t.slug)},"data-barstart":t.bar_start,"data-barheight":String(t.bar_height),children:[(0,c.jsx)("img",{src:t.image?t.image:"/frog.png",alt:t.title,style:{width:"100%"}}),(0,c.jsxs)("p",{className:"events__item__place",children:[(0,c.jsx)("i",{className:"fa fa-map-marker-alt","aria-hidden":"true"})," ",t.place]}),(0,c.jsx)("h2",{children:t.title}),(0,c.jsxs)("p",{className:"events__item__date",children:[t.date,", ",t.time]}),(0,c.jsx)("p",{children:t.description}),(0,c.jsx)("p",{children:f})]},t.slug)},d=(0,o.R0)("events")((function(e){var t=e.db,a=(0,n.useState)(0),s=(0,r.Z)(a,2),o=s[0],d=s[1],m=(0,n.useState)(0),f=(0,r.Z)(m,2),h=f[0],v=f[1],_=(0,n.useState)(),g=(0,r.Z)(_,2),p=g[0],b=g[1],j=(0,n.useState)([]),x=(0,r.Z)(j,2),N=x[0],k=x[1];(0,n.useEffect)((function(){if(t&&t.events){var e=t.events.map((function(e){return{title:e.title,place:e.place,date:e.date,from:e.from,to:e.to,description:e.description,image:e.image,slug:"".concat(e.title.replace(/\s+/g,"-").toLowerCase(),"-").concat(e.from.replace(/:/g,""))}}));e.sort((function(e,t){return i()(e.from,"HH:mm")-i()(t.from,"HH:mm")})),k(e)}}),[t]);var C=i()(),H=C.format("dddd"),w=C.format("h:mm a"),y="Today is ".concat(H,", ").concat(w,", and here's what you have planned:"),S=i()();N.forEach((function(e){if(e){var t=e.to?i()(e.to,"HH:mm"):i()(),a=i()(e.from,"HH:mm"),r=t.diff(a,"minutes");e.from=a.format("HH:mm"),e.to=e.to?t.format("HH:mm"):"Now",e._from=a,e._to=t,e.time=0===r?e.from:"".concat(e.from," - ").concat(e.to),e.duration=0===r?1:r,a.diff(S)<0&&(S=a)}}));var E=i()().diff(S,"minutes");N.forEach((function(e){e.bar_start=100*e._from.diff(S,"minutes")/E,e.bar_height=100*e.duration/E}));var Y=N.map((function(e){return[null===e||void 0===e?void 0:e.bar_height,null===e||void 0===e?void 0:e.bar_start]})),Z=function(e){var t=e.getAttribute("data-barstart"),a=e.getAttribute("data-barheight");null!==t&&null!==a&&(v(t),d(a))},A=function(e){b(p===e?null:e)};return(0,c.jsx)("div",{className:"container",id:"events",children:(0,c.jsxs)("div",{className:"container__content",children:[(0,c.jsx)("a",{className:"google-sheet-link",href:"https://docs.google.com/spreadsheets/d/1kYcFtsMQOap_52pKlTfWCYJk1O5DD66LlZ90TWCgAyA/edit#gid=1802221480",target:"_blank",rel:"noopener noreferrer",children:"View Google Sheet"}),(0,c.jsx)("h1",{children:"Mario Comes to Portland!"}),(0,c.jsx)("h2",{children:y}),(0,c.jsxs)("div",{className:"events",children:[(0,c.jsx)(l,{first_year:S.format("YYYY"),event_bars:Y,bar_height:o,bar_start:h}),(0,c.jsx)("div",{className:"events__items",children:N.map((function(e){return e?(0,c.jsx)(u,{event:e,activeCard:p,changeBarHeight:Z,handleCardClick:A},e.slug):null}))})]})]})})}))}}]);
//# sourceMappingURL=438.38e15319.chunk.js.map